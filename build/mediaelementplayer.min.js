/*!
 *
 * MediaElementPlayer
 * http://mediaelementjs.com/
 *
 * Creates a controller bar for HTML5 <video> add <audio> tags
 * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)
 *
 * Copyright 2010-2013, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof Zepto?(mejs.$=Zepto,Zepto.fn.outerWidth=function(a){var b=$(this).width();return a&&(b+=parseInt($(this).css("margin-right"),10),b+=parseInt($(this).css("margin-left"),10)),b}):"undefined"!=typeof ender&&(mejs.$=ender),function(a){mejs.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,playbackMethod:"native",defaultSeekBackwardInterval:function(a){return.05*a.duration},defaultSeekForwardInterval:function(a){return.05*a.duration},setDimensions:!0,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!1,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["fullscreen"],isVideo:!0,pauseOtherPlayers:!0},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(b,c){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(b,c);var d=this;return d.$media=d.$node=a(b),d.node=d.media=d.$media[0],d.node?"undefined"!=typeof d.node.player?d.node.player:("undefined"==typeof c&&(c=d.$node.data("mejsoptions")),d.options=a.extend({},mejs.MepDefaults,c),d.options.timeFormat||(d.options.timeFormat="mm:ss",d.options.alwaysShowHours&&(d.options.timeFormat="hh:mm:ss"),d.options.showTimecodeFrameCount&&(d.options.timeFormat+=":ff")),mejs.Utility.calculateTimeFormat(0,d.options,d.options.framesPerSecond||25),d.id="th-video_"+mejs.mepIndex++,mejs.players[d.id]=d,d.init(),d):void 0},mejs.MediaElementPlayer.prototype={hasFocus:!1,init:function(){var b=this,c=mejs.MediaFeatures,d=a.extend(!0,{},b.options,{success:function(a,c){b.meReady(a,c)},error:function(a){b.handleError(a)}}),e=b.media.tagName.toLowerCase();if(b.isDynamic="audio"!==e&&"video"!==e,b.isDynamic?b.isVideo=b.options.isVideo:b.isVideo="audio"!==e&&b.options.isVideo,c.isiPad&&b.options.iPadUseNativeControls||c.isiPhone&&b.options.iPhoneUseNativeControls)b.$media.attr("controls","controls"),c.isiPad&&null!==b.media.getAttribute("autoplay")&&b.play();else if(c.isAndroid&&b.options.AndroidUseNativeControls);else{b.$media.removeAttr("controls"),b.container=a('<div id="'+b.id+'" class="th-video-wrapper " tabindex="0""><div class="th-video-inner"><div class="th-video-element"></div><div class="th-poster-element"></div><div class="th-video-clear"></div></div></div>').addClass(b.$media[0].className).insertBefore(b.$media),b.container.addClass((c.isAndroid?"th-video-android ":"")+(c.isiOS?"th-video-ios ":"")+(c.isiPad?"th-video-ipad ":"")+(c.isiPhone?"th-video-iphone ":"")),b.container.find(".th-video-element").append(b.$media),b.node.player=b;var f="video",g=f.substring(0,1).toUpperCase()+f.substring(1);b.options[f+"Width"]>0||b.options[f+"Width"].toString().indexOf("%")>-1?b.width=b.options[f+"Width"]:""!==b.media.style.width&&null!==b.media.style.width?b.width=b.media.style.width:null!==b.media.getAttribute("width")?b.width=b.$media.attr("width"):b.width=b.options["default"+g+"Width"],b.options[f+"Height"]>0||b.options[f+"Height"].toString().indexOf("%")>-1?b.height=b.options[f+"Height"]:""!==b.media.style.height&&null!==b.media.style.height?b.height=b.media.style.height:null!==b.$media[0].getAttribute("height")?b.height=b.$media.attr("height"):b.height=b.options["default"+g+"Height"],b.setPlayerSize(b.width,b.height),d.pluginWidth=b.width,d.pluginHeight=b.height}mejs.MediaElement(b.$media[0],d)},meReady:function(a,b){var c=this,d=mejs.MediaFeatures,e=b.getAttribute("autoplay"),f=!("undefined"==typeof e||null===e||"false"===e);c.created||(c.created=!0,c.media=a,c.domNode=b,d.isAndroid&&c.options.AndroidUseNativeControls||d.isiPad&&c.options.iPadUseNativeControls||d.isiPhone&&c.options.iPhoneUseNativeControls||(c.buildposter(c,c.container,c.media),c.setPlayerSize(c.width,c.height),mejs.MediaFeatures.hasTouch||(c.clickToPlayPauseCallback=function(){c.options.clickToPlayPause&&(c.media.paused?c.play():c.pause())},c.media.addEventListener("click",c.clickToPlayPauseCallback,!1)),f&&c.play(),c.options.enableAutosize&&c.media.addEventListener("loadedmetadata",function(a){c.options.videoHeight<=0&&null===c.domNode.getAttribute("height")&&!isNaN(a.target.videoHeight)&&(c.setPlayerSize(a.target.videoWidth,a.target.videoHeight),c.media.setVideoSize(a.target.videoWidth,a.target.videoHeight))},!1),c.media.addEventListener("play",function(){var a;for(a in mejs.players){var b=mejs.players[a];b.id==c.id||!c.options.pauseOtherPlayers||b.paused||b.ended||b.pause(),b.hasFocus=!1}c.hasFocus=!0},!1),c.media.addEventListener("ended",function(a){if(c.options.autoRewind)try{c.media.setCurrentTime(0)}catch(b){}c.media.pause(),c.options.loop&&c.play()},!1),c.media.addEventListener("loadedmetadata",function(){c.isFullScreen||c.setPlayerSize(c.width,c.height)},!1)),c.options.success&&("string"==typeof c.options.success?window[c.options.success](c.media,c.domNode,c):c.options.success(c.media,c.domNode,c)))},handleError:function(a){var b=this;b.options.error&&b.options.error(a)},setPlayerSize:function(a,b){var c=this;return c.options.setDimensions?("undefined"!=typeof a&&(c.width=a),"undefined"!=typeof b&&(c.height=b),void this.setDimensions(c.width,c.height)):!1},hasFluidMode:function(){var a=this;return a.height.toString().indexOf("%")>0||"none"!==a.$node.css("max-width")&&"t.width"!==a.$node.css("max-width")||a.$node[0].currentStyle&&"100%"===a.$node[0].currentStyle.maxWidth},setDimensions:function(a,b){var c=this;c.container.width(a).height(b)},buildposter:function(b,c,d){var e=this,f=a('<div class="th-video-poster"></div>').appendTo(c.find(".th-poster-element")),g=b.$media.attr("poster");""!==b.options.poster&&(g=b.options.poster),g?e.setPoster(g):f.hide(),d.addEventListener("play",function(){f.hide()},!1),b.options.showPosterWhenEnded&&b.options.autoRewind&&d.addEventListener("ended",function(){f.show()},!1)},hidePoster:function(){var a=this;a.container.find(".th-video-poster").hide()},showPoster:function(){var a=this;a.container.find(".th-video-poster").show()},setPoster:function(b){var c=this,d=c.container.find(".th-video-poster"),e=d.find("img");0===e.length&&(e=a('<img width="100%" height="100%" alt="" />').appendTo(d)),e.attr("src",b),d.css({"background-image":"url("+b+")"})},play:function(){"native"!==this.media.pluginType&&this.load(),this.media.play()},pause:function(){try{this.media.pause()}catch(a){}},load:function(){this.isLoaded||this.media.load(),this.isLoaded=!0},setMuted:function(a){this.media.setMuted(a)},setCurrentTime:function(a){this.media.setCurrentTime(a)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(a){this.media.setVolume(a)},getVolume:function(){return this.media.volume},setSrc:function(a){var b=this;b.media.setSrc(a)},remove:function(){var a,b,c=this;for(a in c.options.features)if(b=c.options.features[a],c["clean"+b])try{c["clean"+b](c)}catch(d){}c.isDynamic?c.$node.insertBefore(c.container):(c.$media.prop("controls",!0),c.$node.clone().insertBefore(c.container).show(),c.$node.remove()),"native"!==c.media.pluginType&&c.media.remove(),delete mejs.players[c.id],"object"==typeof c.container&&c.container.remove(),c.globalUnbind(),delete c.node.player},resetSize:function(){var a=this;setTimeout(function(){a.setPlayerSize(a.width,a.height)},50)}},function(){function b(b,d){var e={d:[],w:[]};return a.each((b||"").split(" "),function(a,b){var f=b+"."+d;0===f.indexOf(".")?(e.d.push(f),e.w.push(f)):e[c.test(b)?"w":"d"].push(f)}),e.d=e.d.join(" "),e.w=e.w.join(" "),e}var c=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(c,d,e){var f=this,g=f.node?f.node.ownerDocument:document;c=b(c,f.id),c.d&&a(g).bind(c.d,d,e),c.w&&a(window).bind(c.w,d,e)},mejs.MediaElementPlayer.prototype.globalUnbind=function(c,d){var e=this,f=e.node?e.node.ownerDocument:document;c=b(c,e.id),c.d&&a(f).unbind(c.d,d),c.w&&a(window).unbind(c.w,d)}}(),"undefined"!=typeof a&&(a.fn.mediaelementplayer=function(b){return b===!1?this.each(function(){var b=a(this).data("mediaelementplayer");b&&b.remove(),a(this).removeData("mediaelementplayer")}):this.each(function(){a(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,b))}),this}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$);